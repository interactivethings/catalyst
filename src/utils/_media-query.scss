@import "../globals";

//
// Mixins
//

@mixin breakpoint($key, $restriction: '') {
  $first: if(index(list-keys($ranges), $key) == 1, true, false);
  $last:  if(index(list-keys($ranges), $key) == length($ranges), true, false);

  @if $key == '' {
    @content;
  } @else {
    @if $restriction == 'only' {
      $query: 'only screen and (min-width:#{range-start($key)}) and (max-width:#{range-end($key)})';
    } @else if $restriction == 'down' {
      $query: 'only screen and (max-width:#{range-end($key)})';
    } @else {
      @if $first {
        $query: 'only screen';
      } @else {
        $query: 'only screen and (min-width:#{range-start($key)})';
      }
    }
    @media #{unquote($query)} { @content; }
  }
}

//
// Functions
//

@function breakpoint($key) {
  @return list-get($breakpoints, $key);
}

@function range($key) {
  @return list-get($ranges, $key);
}

@function range-start($key) {
  @return key(range($key));
}

@function range-end($key) {
  @return value(range($key));
}
